import csv      # needed to access csv files
import requests # needed for spotify API

# References
# https://medium.com/@adrian_cooney/how-to-move-from-apple-music-to-spotify-6d4192c634b0 - XML Guideline
# https://developer.spotify.com/documentation/web-api/reference-beta/#endpoint-get-users-saved-tracks - Save Track for user
# https://towardsdatascience.com/using-python-to-create-spotify-playlists-of-the-samples-on-an-album-e3f20187ee5e
# https://www.dataquest.io/blog/python-api-tutorial/ - Python API beginner tutorial
# https://stmorse.github.io/journal/spotify-api.html - Access token

# client credentials for spotify api
CLIENT_ID = #redacted
CLIENT_SECRET = #redacted

# in order to access the API, we need to pass an access token
# we need to POST a request with our client credentials
# and save the appropriate part of the response:

AUTH_URL = 'https://accounts.spotify.com/api/token'

# POST
auth_response = requests.post(AUTH_URL, {
    'grant_type': 'client_credentials',
    'client_id': CLIENT_ID,
    'client_secret': CLIENT_SECRET,
})

# convert the response to JSON
auth_response_data = auth_response.json()

# save the access token (golden ticket to API)
access_token = auth_response_data['access_token']

# in order to access API endpoints, we send a properly formed GET
# request to the API server, with our token in the header
headers = {
    'Authorization': 'Bearer {token}'.format(token=access_token)
}

# base URL of all spotify API endpoints
BASE_URL = 'https://api.spotify.com/v1/'

# Let It Happen - Tame Impala
# Track ID from the URI
track_id = '2X485T9Z5Ly0xyaghN73ed' 

# Actual GET request with proper header
r = requests.get(BASE_URL + 'audio_features/' + track_id, headers=headers) 
print(r.status_code)                                                             
r = r.json()
r
